{
  "hash": "c540ab284a138b07d419b1aff0a611d8",
  "result": {
    "markdown": "---\ntitle: \"Salmon Fisheries in Alaska\"\ndescription: \"A time series analysis of fisheries in Alaska since 1985\"\nauthor:\n  - name: Kate Becker\n    url: https://kateebeckerr.github.io/\n    affiliation: Master of Environmental Data Science Program @ The Bren School (UCSB) & The National Center for Ecological Analysis & Synthesis\n    affiliation-url: https://ucsb-meds.github.io/ \ndate: 03-14-2024\ncategories: [Quarto, R, MEDS, Fisheries, Time Series, Salmon, Alaska] # self-defined categories\ncitation: \n  url: https://www.npfmc.org/wp-content/PDFdocuments/fmp/Salmon/SalmonFMP.pdf\nimage: salmon-boat.jpeg\ndraft: false # setting this to `true` will prevent your post from appearing on your listing page until you're ready!\n---\n\n\n# How Have Salmon Fisheries in Alaska Changed Since 1985\n\nThe overarching question of this analysis is “How have salmon fisheries in Alaska changed since 1985?”.  In order to tackle this broad question, on a more finite scale, I asked:\n1. What is the distribution of yearly fish yields for all five species of salmonoid?\n2. How have nine of the most commercially important fisheries changed in terms of yearly catch? \n3. Can we see clear trends in the time series data that can be accounted for by changes in Alaskan fisheries management?\n\nThe data used in this analysis was a publicly available data set provided by the Alaska Department of Fish and Game. The data set is composed of 9 variables: year, area, species name, number of fish(estimated), landed weight(lbs.), whole weight (lbs.), permit count, processor count, and vessel count. Although all variables are equally important, I modified my data set to only include year, species name, number of fish (estimated), and area in order to make R more computationally efficient. The data set is a .csv and was available through a report including harvest attributed to state managed fisheries, test fisheries, commercial sale o derby fish, and Annette Island fisheries. A better outline of the variables used in this analysis are listed below.  \n\n-\tYear: the year the landings occurred as recorded on ADF&G fish tickets\n-\tArea: Areas define by groupings of statistical areas as recorded on ADF&G\n-\tSpecies name: The species as recorded on ADF&G fish tickets\n-\tNumber of fish (estimated): Number of animals is a count of each species in the catch or harvest. \n\nAnother data set was used in order to spatially map nine commercially important fisheries on top of a pre-existing Alaska shapefile. The shapefile was publicly available and provided by iGismap, an online data platform that provides GIS maps. \n\nDesign elements\n\nThis analysis required an exact approach and design \n\n1. Graphic form\nThe graphic forms I used were a radar plot, a line chart, and a geo-spatial map. I wanted to explore more complex styles in this analysis, and I felt that the radar plot provided an aesthetically pleasing chart, one that resembled a sonar on a boat, for visualization of salmon catch by region in 1985 and 2023 to show change overtime.  For the line graph I wanted to clearly show the distribution in salmon catch by year by species to create a visualization that included all components of my data set. I used this graph as my primary plot because I felt that any viewer of this info graphic would be able to gather the main takeaways of the analysis from a quick glance. Finally, I created a map to add a geographic context to show fisheries proximity to one another and locations in Alaska as well as provide the viewer with a non-complex visualization. \n\n2. Text \nFor most of my visuals I changed the aesthetics of the labels as well as the titles. I used limited text in most of my plots, except the line chart because I felt that the radar plot spoke for itself and would be crowded with excess information. A lot of information can be gathered from a radar plot with simply a categorical and numeric. For the map, I removed latitude and longitude values to make it look cleaner but included labels to clearly display the fisheries locations. Finally, the line chart included all text components except grid lines because I felt a viewer can still see clear patterns in the data set without minor and major lines. I also included all years on the x- axis for it to be an effective time series visualization.  \n\n3. Themes \nI altered the theme elements pretty drastically in all three of my plots. This was necessary to have the text aesthetics, outlined above, that I wanted. Most theme elements included changes in legends, color bars, ticks, titles, the panel, and major and minor grid line. \n\n4. Colors\nI used salmon themed color palettes found online and a light blue background to resemble water. \n\n5. Typography\nI used the same font for each visualization so that it would be cohesive in the infographic. \n\n6. General design \nIn my infographic, I let the visualizations speak for themselves by only including brief comments in order to tie the visualizations together with more background information. As stated above, I also centered and increased the size of my question and the line chart so that the viewer focuses their attention on the most important aspects and the main takeaways from this info graphic. I also used the same color scheme (salmon color hex codes) for the text and the visualizations \n\n7. Contextualizing the data\nI was able to conceptualize the data by using the same time scale throughout all visualizations.  I also stayed consistent with using number of fish (estimated) as the primary metric for fishery success. \n\n8. Centering your primary message\nI used my line graph as the center of my infographic and printed my primary question above it in order to highlight the main takeaway before a viewer dives deeper into the more complex visualizations. \n\n9. Considering accessibility (e.g. colorblind-friendly palettes / contrast, alt text)\nI highlighted specific words in my infographic so that viewers can gather the main message by skimming the page rather than having to read through all of the text.\n\n10. Applying a DEI lens to your design\nSalmon fisheries are a major part of Alaska’s economy and have provided native tribes with food for the last century. Unfortunately, over fishing of Alaska salmon and other native fish, by international fishing companies, have diminished food resources as well as impacted historic cultural significance. Although this analysis was able to provide insight into the change in fisheries overtime, it doesn’t dissect the sustainability of these fisheries, who profits the most, who receives the majority of the catch, or how indigenous populations are affected. This is a primary analysis and can be greatly improved in terms of a DEI lens. \n\n\n# The Analysis \n\n\n\n\n\n### Load libraries \n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse) # data import, tidying, manipulation, and data visualizations\nlibrary(streamgraph) # represent the evolution of a numeric variable for several groups \nlibrary(hrbrthemes) #themes and typography\nlibrary(plotly) # make interactive, publication quality graphs\nlibrary(ggalt) # crs, geoms, statistical transformations\nlibrary(jpeg) # read, write, and display images in jpeg form \nlibrary(patchwork) # make plot comparisons\nlibrary(dplyr) # subset, reshape, join and summarize data\nlibrary(ggpubr) # facilitates creations of beautiful ggplot based graphs \nlibrary(stringr) # set of functions for making work with strings easy \nlibrary(prismatic) # color manipulation \nlibrary(Cairo) #create high quality vector (pdf) and outputs\nlibrary(scales) # control appearance of axis and legend labels \nlibrary(extrafont) # extra fonts\nlibrary(GGally) # reduce complexity of combining geometric objects with transformed data \nlibrary(sf) # spatial vector data\nlibrary(terra) # spatial data with vectors \nlibrary(spData) # spatial data anlysis \nlibrary(tibble) # create dataframes \nlibrary(fmsb) # radar charts\nlibrary(ggh4x) # ggplot utility functions \nlibrary(urbnmapr) # provides state and county shapefiles\nlibrary(showtext) # various fonts \nlibrary(ggrepel) # avoid overlapped texts in plots\nlibrary(scales) # appearance fo axis and legend labels \nlibrary(ggmap) # spatial data and creating maps \nlibrary(usmap) # map plotting \n```\n:::\n\n\n\n### Data read in\n\n::: {.cell}\n\n```{.r .cell-code}\n# load data ----\nalaska_state <- read_csv(\"/Users/katebecker/Documents/Bren/Winter/240/final/Becker-eds240-HW4/data/Alaska-Statewide.csv\")\n\n# clean the data frame to lower snake case ----\nalaska <- alaska_state %>%   \n  janitor::clean_names()\n```\n:::\n\n\n\n### Initial wrangling of primary dataframe for 2023 plot\n\n::: {.cell}\n\n```{.r .cell-code}\n# 2023 wrangling ----\n\n# convert area variable in alaska dataframe to type factor\nalaska$area <- as.factor(alaska$area)\n\n# filter for year 2023, group by area, find the mean and sum of number_of_fish_estimated and create new columns, round to zero digits \nsummary_stats <- alaska %>%\n  filter(year == \"2023\") %>%\n  group_by(area) %>%\n  summarise(mean_fish = mean(number_of_fish_estimated),\n            sum_fish = sum(number_of_fish_estimated)) %>%\n  mutate(mean_fish= round(mean_fish, digits = 0))\n\n# new dataframe grouped by area and with count column\nNrs <- alaska %>%\n  group_by(area) %>%\n  count()\n\n# left join both dataframes into one by the area variable \nsummary_all <- left_join(summary_stats, Nrs, by = \"area\")\n```\n:::\n\n\n\n## 2023 Fishery Yields\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# create radar plot with summary_all dataframe ----\n\n# encode area vector as a factor and sort area levels \nsummary_all$area <- factor(summary_all$area, levels = sort(unique(summary_all$area)))\n\n# make a ggplot\nggplot(summary_all) +\n  \n  # use geom_col with area on x axis and total fish sums on y\n  geom_col(aes(\n    x = area,\n    y = sum_fish,#is numeric\n    fill = sum_fish),\n    show.legend = TRUE,\n    ) +\n  # apply color scale to values and create a scale  \n  scale_fill_gradient(low = \"#FFA07A\", high = \"#C66264\", name = \"Yearly Catch\", labels = comma, breaks = c(0, 10000000, 20000000, 30000000, 40000000, 50000000, 60000000)) +                              #))\n\n  # convert sum_fish values from exponential to whole numebrs separatedby commas\n  scale_y_continuous(labels = scales::comma) +\n  \n  # add y label\n  labs(y = \"Estimated Catch\") +\n  \n  # change colourbar aesthetics\n  guides (fill = guide_colourbar(direction = \"vertical\", barheight = 16)) +\n  \n  # using theme() function change aesthetics to plot and panel  \n  theme(axis.title.x=element_blank(),\n        axis.ticks.x=element_blank(),\n        axis.text.x = element_text(size=5, color = \"black\", face = \"bold\"), \n        axis.text.y=element_blank(),\n        axis.title.y=element_blank(),\n        axis.ticks.y = element_blank(),\n        plot.background = element_rect(fill = \"lightblue\"),\n        panel.background = element_rect(fill = \"lightblue\"),\n        panel.grid = element_line(color = \"white\"),\n        legend.position = \"right\",\n        legend.title = element_text(colour=\"black\", size=8, \n                                      face=\"bold\"),\n        legend.text = element_text(angle = 45, hjust = 1, color = \"black\"),\n        legend.background = element_rect(fill = \"lightblue\"),\n        plot.margin = unit(c(0.01, 0.01, 0.01, 0.01), \"lines\"),\n        plot.title = element_text(size = 18, hjust=1.3, vjust = -3.0, color = \"black\"),\n        panel.spacing = unit(4, \"lines\")) +\n\n  # add title\n  ggtitle(\"2023\") +\n  \n  # converts chart to have polar units\n  coord_polar()\n```\n\n::: {.cell-output-display}\n![](salmon-fisheries-2_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n### Initial wrangling of primary dataframe for 1985 plot\n\n::: {.cell}\n\n```{.r .cell-code}\n# 1985 wrangling ----\n\n# convert area variable to a factor \nalaska$area <- as.factor(alaska$area)\n\n# create summary stats variable by filtering for 1985 year, group by area, create new columns for mean and summary values for number_of_fish_estimated values \nsummary_stats_85 <- alaska %>%\n  filter(year == \"1985\") %>%\n  group_by(area) %>%\n  summarise(mean_fish_85 = mean(number_of_fish_estimated),\n            sum_fish_85 = sum(number_of_fish_estimated)) %>%\n  mutate(mean_fish_85= round(mean_fish_85, digits = 0))\n\n# new dataframe grouped by area with number of counts\nNrs_85 <- alaska %>%\n  group_by(area) %>%\n  count()\n\n# left join dataframes by the area variable \nsummary_all_85 <- left_join(summary_stats_85, Nrs_85, by = \"area\")\n\n# remove fisheries with NA, not comparable year to year  \nsummary_all_85 <- summary_all_85 %>%\n  filter(!row_number() %in% c(7,11))\n  \n# encode area vector as a factor and sort area levels \nsummary_all_85$area <- factor(summary_all_85$area, levels = sort(unique(summary_all_85$area)))\n```\n:::\n\n\n\n\n## 1985 Fishery Yields\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# create radar plot with summary_all dataframe ----\n\n# ggplot2 of summary_all_85 data\nggplot(summary_all_85) +\n\n  # use geom_col with area on x axis and total fish sums on y axis\n  geom_col(aes(\n    x = area,\n    y = sum_fish_85,#is numeric\n    fill = sum_fish_85),\n    show.legend = TRUE,\n    stat = \"identity\"\n    ) +\n  \n  # add color scale for number_of_fish_estimated values \n  scale_fill_gradient(low = \"#FFA07A\", high = \"#C66264\", name = \"Yearly Catch\", labels = comma, breaks = c(0, 10000000, 20000000, 30000000, 40000000, 50000000, 60000000)) + \n      \n  # add y label\n  labs(y = \"Estimated Catch\") +\n  \n  # change colour bar aesthetics\n  guides (fill = guide_colourbar(direction = \"vertical\", barheight = 16)) +\n  \n  # using theme() to change plot and panel aesthetics\n  theme(axis.title.x=element_blank(),\n        axis.ticks.x=element_blank(),\n        axis.text.x = element_text(size=5, color = \"black\", face = \"bold\"), \n        axis.text.y=element_blank(),\n        axis.title.y=element_blank(),\n        axis.ticks.y = element_blank(),\n        plot.background = element_rect(fill = \"lightblue\"),\n        panel.background = element_rect(fill = \"lightblue\"),\n        panel.grid = element_line(color = \"white\"),\n        legend.position = \"right\",\n        legend.title = element_text(colour=\"black\", size=8, \n                                      face=\"bold\"),\n        legend.text = element_text(angle = 45, hjust = 1, color = \"black\"),\n        legend.background = element_rect(fill = \"lightblue\"),\n        plot.margin = unit(c(0.01, 0.01, 0.01, 0.01), \"lines\"),\n        plot.title = element_text(size = 18, hjust=1.3, vjust = -3.0, color = \"black\"),\n        panel.spacing = unit(4, \"lines\")) +\n          \n  # add title\n  ggtitle(\"1985\") +\n  \n  # converts chart to have polar units \n  coord_polar()\n```\n\n::: {.cell-output-display}\n![](salmon-fisheries-2_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n\n### Fisheries data wrangling \n\n::: {.cell}\n\n```{.r .cell-code}\n# data wrangling for fisheries locations ----\n# create a new data frame with latitude and longitude values of the fisheries used in this analysis \nregions <- data.frame(\n      lon = c(-173.5, -160.6391, -158.4045, -152.644, -152.407, -147.0971, -139.73),\n      lat = c(52.09, 57.99, 56.295, 59.37, 57.79, 60.6905, 59.547),\n      area = c(\"Alaska Peninsula/Aleutian Islands\", \"Bristol Bay\", \"Chignik\", \"Cook Inlet\", \"Kodiak\", \"Prince William Sound\", \"Southeast/Yakutat\")\n)\n\n# merge summary statistics and lat and long values for independent fisheries in one data frame\ngeo <- merge(summary_all, regions)\n\n# make geo dataframe an sf object and set coordinate reference system \ngeo <- geo |> \n  st_as_sf(coords = c(\"lon\", \"lat\"), crs = \"EPSG:4269\")\n```\n:::\n\n\n\n### Initial read in and wrangling of Alaska shapefile \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# read in alaska shapefile ----\nak_regions <- st_read(\"/Users/katebecker/Documents/Bren/Winter/240/final/Becker-eds240-HW4/data/shapefile_demo_data/ak_regions_simp.shp\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nReading layer `ak_regions_simp' from data source \n  `/Users/katebecker/Documents/Bren/Winter/240/final/Becker-eds240-HW4/data/shapefile_demo_data/ak_regions_simp.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 13 features and 3 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -179.2296 ymin: 51.15702 xmax: 179.8567 ymax: 71.43957\nGeodetic CRS:  WGS 84\n```\n:::\n:::\n\n\n\n## Map of Alaskas Most Commerically Important Salmon Fisheries\n\n::: {.cell}\n\n```{.r .cell-code}\n# coordinate reference system ----\n# transform alaska shapefile to crs of 3338\nak_regions_3338 <- ak_regions %>%\n  st_transform(crs = 3338)\n\n# transfrom geo spatial object to crs of 3338\ngeo_3338 <- geo %>%\n  st_transform(crs = 3338)\n\n# assign a color for each region in alaska by hex code\nmy_colors <- c(\"Aleutian Islands\" = \"#bf0452\",\n               \"Chignik\" = \"#e8a9ca\",\n               \"Bristol Bay\" = \"#FF7F50\",\n               \"Kodiak\" = \"#FF7799\",\n               \"Cook Inlet\" = \"#ef586d\",\n               \"Prince William Sound\" = \"#f5237b\",\n               \"Southeast\" = \"#FF91A4\",\n               \"Norton Sound\" = \"#b7138c\",\n               \"Arctic\" = \"#ee6088\",\n               \"Bristol Bay\" = \"#FD7C6E\",\n               \"Copper River\" = \"#d35b8d\",\n               \"Yukon\" = \"#f697dd\"\n               # Add more regions and corresponding colors as needed\n               )\n\n# create map of alaska and fisheries ----\n# initial ggplot using geom_sf for alaska shapefile and fill by region \nalaska_regions <- ggplot() +\n  geom_sf(data = ak_regions_3338, aes(fill = region, alpha = 0.4))+\n  scale_fill_manual(values = my_colors) + # apply colors specified above toe ach region\n  theme(axis.title.x=element_blank(), # use theme argument to chane panel and plot aesthetics\n        axis.ticks.x=element_blank(),\n        axis.text.x = element_text(), \n        axis.text.y=element_blank(),\n        axis.title.y=element_blank(),\n        axis.ticks.y = element_blank(),\n        panel.background = element_rect(fill = \"lightblue\"),\n        panel.grid.major = element_blank(),\n        legend.position = \"bottom\",\n        legend.title = element_text(colour=\"black\", size=12),\n        legend.text = element_text(family = \"josefin\",\n                               size = 8)) +\n  # change aesthetics of legend\n  guides(fill = guide_legend(override.aes = list(alpha = 0)))  \n  \n# add fisheries spatial object to alaska regions plot \nfinal_alaska <- alaska_regions +\n  geom_sf(data = geo_3338, color = \"yellow\", shape = 8, size = 2) + # set points to yellow starts\n    geom_sf_text( # add labels to map specifying the fishery name\n    data = geo,\n    aes(label = area, hjust = -0.08, vjust = 1.5),\n    check_overlap = TRUE,\n    size = 3,\n    color = \"black\",\n    fontface = \"bold\") +\n  geom_label_repel() + # repel labels so no overlap\n  theme(legend.position = \"none\") \n\n# visualize map \nfinal_alaska \n```\n\n::: {.cell-output-display}\n![](salmon-fisheries-2_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n## Time Series of Average Salmonoid Catch Each Year Since 1985\n\n::: {.cell}\n\n```{.r .cell-code}\n# create time series plot ----\n# get rid of na values in alaska data frame \ncleaned_alaska <- na.omit(alaska)\n\n# Calculate averages of number_of_fish_estimated grouped by year and species_name\naveraged_alaska <- cleaned_alaska %>%\n  group_by(year, species_name) %>%\n  summarize(avg_number_of_fish = mean(number_of_fish_estimated))\n\n# create ggplot \naveraged_alaska %>%\n  ggplot( aes(x=year, y= avg_number_of_fish, group=species_name, color=species_name)) + # set x axis to year from 1985 to 2023 with number of fish estimates per year by species\n    geom_line(linewidth = 2, alpha = 0.8) + # add lines\n  scale_y_continuous(labels = scales::comma, limits = c(0,30000000), breaks = seq(0, 30000000, by = 5000000), expand =c(0,0)) + # change y axis aesthetic to change exponential values to whole values separated by commas \n  scale_x_continuous(breaks = unique(averaged_alaska$year), expand = c(0,0)) + # x axis includes all values of year variable \n  ggtitle(\"Salmonoid Catch Distribution Over the Years\") + # add title\n  theme(axis.title.x = element_blank(), # change theme of plot and panel using theme()\n        axis.text.x = element_text(angle = 45, hjust = 1, size = 6),\n        panel.grid.major = element_blank(),\n        panel.grid.minor = element_blank(),\n        panel.background = element_rect(fill = \"lightblue\"),\n        plot.background = element_rect(fill = \"lightblue\"),\n        legend.background = element_rect(fill = \"lightblue\"),\n        plot.title = element_text(hjust = 0.5)\n        ) +\n  # change aesthetics of legend\n  guides(color = guide_legend(title = \"Species\", override.aes = list(size = 4))) +\n  labs(y = \"Average Catch Per Year\") + # add y label\n  # apply colors to each species \n  scale_color_manual(values = c(\"#f67825\", \"#b85265\",\"#a51d0e\", \"#f9295f\",\"#FD7C6E\"))\n```\n\n::: {.cell-output-display}\n![](salmon-fisheries-2_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n# Final Infographic \n\n ![Caption for the image](final-infographic.jpg) \n\n",
    "supporting": [
      "salmon-fisheries-2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}